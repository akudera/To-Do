var M=Object.defineProperty;var w=a=>{throw TypeError(a)};var y=(a,t,s)=>t in a?M(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var r=(a,t,s)=>y(a,typeof t!="symbol"?t+"":t,s),b=(a,t,s)=>t.has(a)||w("Cannot "+s);var d=(a,t,s)=>(b(a,t,"read from private field"),s?s.call(a):t.get(a)),E=(a,t,s)=>t.has(a)?w("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,s),k=(a,t,s,e)=>(b(a,t,"write to private field"),e?e.call(a,s):t.set(a,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();class I{constructor(t,s="",e=String(Date.now()),i=!1){this.id=e,this.title=t,this.description=s,this.isComplete=i}}class L{constructor(){r(this,"storageKey");this.storageKey="todoTasks"}loadTasksFromLocalStorage(){const t=localStorage.getItem(this.storageKey);if(t)try{return JSON.parse(t).map(e=>new I(e.title,e.description,e.id,e.isComplete))}catch(s){console.error("Ошибка при парсинге задачи из LocalStorage:",s)}}saveTasksToLocalStorage(t){localStorage.setItem(this.storageKey,JSON.stringify(t))}}var C,S;const m=class m{static get listElement(){return this._taskListElement}static set listElement(t){this._taskListElement=t}static get tasks(){return d(this,S)}static set tasks(t){k(this,S,t)}static renderTasks(t=this.tasks){t.length===0?this.listElement.querySelector(".main__item--info")||(this.listElement.innerHTML='<li class="main__item main__item--info">Список дел пока пуст.</li>'):(this.listElement.innerHTML="",t.forEach(s=>{var i;const e=this.createTaskElement(s);if((i=this.listElement)==null||i.append(e),s.isComplete){const n=e.querySelector(this.selectors.checkbox);n.checked=!0}}))}static createTaskElement(t){const s=document.createElement("li");s.dataset.id=t.id,s.dataset.jsTask="",s.classList.add("main__item");const e=document.createElement("div");e.classList.add("main__item-wrapper"),e.dataset.jsDndElement="",s.append(e);const i=document.createElement("input");i.setAttribute("type","checkbox"),i.classList.add("main__item-checkbox"),i.setAttribute("name","taskCheckbox"),i.dataset.jsCheckbox="",e.append(i);const n=document.createElement("div");n.classList.add("main__item-custom-checkbox"),e.append(n);const o=document.createElement("button");o.dataset.jsDndButton="",o.innerHTML=this.svg.dndButtonIcon,o.classList.add("main__item-dnd","hidden"),e.append(o);const h=document.createElement("span");h.textContent=t.title,h.classList.add("main__item-title"),e.append(h);const u=document.createElement("button");return u.classList.add("main__item-delete-button"),u.ariaLabel="Удалить задачу",u.title="Удалить задачу",u.innerHTML=this.svg.urnIcon,e.append(u),s}};C=new WeakMap,S=new WeakMap,E(m,C,new L),r(m,"selectors",{taskList:"[data-js-task-list]",checkbox:"[data-js-checkbox]"}),r(m,"svg",{urnIcon:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m10 12 4 4m0-4-4 4M4 6h16m-4 0-.27-.812c-.263-.787-.394-1.18-.637-1.471a2 2 0 0 0-.803-.578C13.939 3 13.524 3 12.695 3h-1.388c-.829 0-1.244 0-1.596.139a2 2 0 0 0-.803.578c-.243.29-.374.684-.636 1.471L8 6m10 0v10.2c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311C15.72 21 14.88 21 13.2 21h-2.4c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311C6 18.72 6 17.88 6 16.2V6"/></svg>',dndButtonIcon:'<svg viewBox="0 0 15 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.13281 3.02813C6.13281 1.61719 4.90781 0.46875 3.39844 0.46875C1.88906 0.46875 0.664062 1.61719 0.664062 3.02813C0.664062 4.44125 1.88906 5.5875 3.39844 5.5875C4.90781 5.5875 6.13281 4.44125 6.13281 3.02813ZM6.13281 21.9719C6.13281 20.5588 4.90781 19.4125 3.39844 19.4125C1.88906 19.4125 0.664062 20.5588 0.664062 21.9719C0.664062 23.3828 1.88906 24.5312 3.39844 24.5312C4.90781 24.5312 6.13281 23.3828 6.13281 21.9719ZM3.39844 9.94063C4.90781 9.94063 6.13281 11.0891 6.13281 12.5C6.13281 13.9109 4.90781 15.0594 3.39844 15.0594C1.88906 15.0594 0.664062 13.9109 0.664062 12.5C0.664062 11.0891 1.88906 9.94063 3.39844 9.94063ZM14.3359 3.02813C14.3359 1.61719 13.1109 0.46875 11.6016 0.46875C10.0922 0.46875 8.86719 1.61719 8.86719 3.02813C8.86719 4.44125 10.0922 5.5875 11.6016 5.5875C13.1109 5.5875 14.3359 4.44125 14.3359 3.02813ZM11.6016 19.4125C13.1109 19.4125 14.3359 20.5588 14.3359 21.9719C14.3359 23.3828 13.1109 24.5312 11.6016 24.5312C10.0922 24.5312 8.86719 23.3828 8.86719 21.9719C8.86719 20.5588 10.0922 19.4125 11.6016 19.4125ZM14.3359 12.5C14.3359 11.0891 13.1109 9.94063 11.6016 9.94063C10.0922 9.94063 8.86719 11.0891 8.86719 12.5C8.86719 13.9109 10.0922 15.0594 11.6016 15.0594C13.1109 15.0594 14.3359 13.9109 14.3359 12.5Z" fill="#669966"/></svg>'}),r(m,"_taskListElement",document.querySelector(m.selectors.taskList)),E(m,S,d(m,C).loadTasksFromLocalStorage()||[]);let l=m;var T;class x{constructor(t){E(this,T);r(this,"isDraggingMode",!1);r(this,"selectors",{list:"[data-js-task-list]",listElement:"[data-js-task]",listElementInner:"[data-js-dnd-element]",dndButton:"[data-js-dnd-button]",checkbox:"[data-js-checkbox]"});r(this,"ids",{dragModeButton:"dndMode"});r(this,"stateClasses",{isDragging:"is-dragging"});r(this,"initialState",{draggableElement:null,draggableElementWrapper:null,offsetY:null});r(this,"svg",{onDndModeIcon:'<svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.4583 4.16668H4.16667C3.61413 4.16668 3.08423 4.38617 2.69353 4.77687C2.30283 5.16757 2.08333 5.69748 2.08333 6.25001V20.8333C2.08333 21.3859 2.30283 21.9158 2.69353 22.3065C3.08423 22.6972 3.61413 22.9167 4.16667 22.9167H18.75C19.3025 22.9167 19.8324 22.6972 20.2231 22.3065C20.6138 21.9158 20.8333 21.3859 20.8333 20.8333V13.5417M19.2708 2.60418C19.6852 2.18978 20.2473 1.95697 20.8333 1.95697C21.4194 1.95697 21.9814 2.18978 22.3958 2.60418C22.8102 3.01858 23.043 3.58063 23.043 4.16668C23.043 4.75273 22.8102 5.31478 22.3958 5.72918L12.5 15.625L8.33333 16.6667L9.375 12.5L19.2708 2.60418Z" stroke="#1E1E1E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',offDndModeIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="m18.8 16 5.5-5.5c.8-.8.8-2 0-2.8-.3-.4-.8-.7-1.3-.7s-1 .2-1.4.6L16 13.2l-5.5-5.5c-.8-.8-2.1-.8-2.8 0-.4.3-.7.8-.7 1.4s.2 1 .6 1.4l5.5 5.5-5.5 5.5c-.3.4-.6.9-.6 1.5 0 .5.2 1 .6 1.4s.9.6 1.4.6 1-.2 1.4-.6l5.5-5.5 5.5 5.5c.8.8 2.1.8 2.8 0 .8-.8.8-2.1 0-2.8z"/></svg>'});r(this,"holderTimerState",{holdTimer:null,isHolding:!1});r(this,"scrollIntervalState",{interval:null});r(this,"focusState",{focusElement:null,isDragging:!1});k(this,T,new L),this.listElement=l.listElement,this.listElements=this.listElement.children,this.listRowGap=t,this.dragModeButton=document.getElementById(this.ids.dragModeButton),this.state={...this.initialState},this.bindEvents()}bindEvents(){this.listElement.addEventListener("pointerdown",t=>{this.onPointerDown(t)}),document.addEventListener("pointermove",t=>{this.onPointerMove(t)}),document.addEventListener("pointerup",()=>{this.onPointerUp()}),this.listElement.addEventListener("focusout",()=>{this.resetFocusState()}),this.listElement.addEventListener("keydown",t=>{this.keydownHandler(t)}),this.dragModeButton.addEventListener("click",()=>{this.onDragModeButtonClick()})}resetDragMode(){this.isDraggingMode=!1;const t=document.querySelectorAll(this.selectors.dndButton),s=document.querySelectorAll(this.selectors.checkbox);t.forEach(e=>{e.classList.add("hidden")}),s.forEach(e=>{e.classList.remove("hidden"),e.nextElementSibling.classList.remove("hidden")}),this.dragModeButton.innerHTML=this.svg.onDndModeIcon}onDragModeButtonClick(){const t=document.querySelectorAll(this.selectors.dndButton),s=document.querySelectorAll(this.selectors.checkbox);this.isDraggingMode=!this.isDraggingMode,this.isDraggingMode?(t.forEach(e=>{e.classList.remove("hidden")}),s.forEach(e=>{e.classList.add("hidden"),e.nextElementSibling.classList.add("hidden")}),this.dragModeButton.innerHTML=this.svg.offDndModeIcon):this.resetDragMode()}resetFocusState(){var t;this.focusState.isDragging&&this.state.draggableElement&&(this.state.draggableElementWrapper.style.height="",this.state.draggableElement.style.zIndex="0",this.state.draggableElement.classList.remove(this.stateClasses.isDragging)),(t=this.state.draggableElement)==null||t.blur(),this.focusState.focusElement=null,this.focusState.isDragging=!1}keydownHandler(t){if((t.code==="Space"||t.code==="Enter")&&(t.preventDefault(),this.focusState.focusElement=t.target,this.focusState.isDragging=!0,this.setDragState(t,!1)),this.focusState.isDragging&&t.code==="ArrowUp"){t.preventDefault();const s=this.state.draggableElementWrapper.previousElementSibling;s&&this.elementShiftUp(s,!0);const e=this.state.draggableElement.querySelector(this.selectors.dndButton);e.focus(),this.focusState.focusElement=e,this.focusState.isDragging=!0,this.setDragState(t,!1)}if(this.focusState.isDragging&&t.code==="ArrowDown"){t.preventDefault();const s=this.state.draggableElementWrapper.nextElementSibling;s&&this.elementShiftDown(s,!0);const e=this.state.draggableElement.querySelector(this.selectors.dndButton);e.focus(),this.focusState.focusElement=e,this.focusState.isDragging=!0,this.setDragState(t,!1)}this.focusState.isDragging&&t.code==="Escape"&&(this.resetFocusState(),l.tasks=this.getNewTasksList(),d(this,T).saveTasksToLocalStorage(l.tasks))}getNewTasksList(){const t=[];for(let s=0;s<l.listElement.children.length;s++){const e=l.listElement.children[s],i=l.tasks.find(o=>String(o.id)===String(e.dataset.id));if(!i)continue;const n=new I(i.title,i.description,i.id,i.isComplete);t.push(n)}return t}elementShiftUp(t,s=!1){const e=Array.from(l.listElement.children),i=e.indexOf(t);if(i!==-1){for(let n=i;n!==-1;n--)if(!e[n].matches(".hidden")){const o=e[n].getBoundingClientRect(),h=this.state.draggableElement.getBoundingClientRect();if(s||h.top<o.top+o.height/2){l.listElement.insertBefore(this.state.draggableElementWrapper,e[n]);return}}}}elementShiftDown(t,s=!1){const e=Array.from(l.listElement.children),i=e.indexOf(t);if(i!==-1){for(let n=i;n!==e.length;n++)if(!e[n].matches(".hidden")){const o=e[n].getBoundingClientRect(),h=this.state.draggableElement.getBoundingClientRect();if(s||h.bottom>o.top+o.height/2){l.listElement.insertBefore(this.state.draggableElementWrapper,e[n+1]);return}}}}onPointerDown(t){if(this.focusState.focusElement){this.resetFocusState();return}this.holderTimerState.holdTimer=setTimeout(()=>{this.holderTimerState.isHolding=!0,this.setDragState(t)},300)}onPointerMove(t){if(!this.state.draggableElement)return;const s=this.listElement.getBoundingClientRect().height-this.state.draggableElement.getBoundingClientRect().height,e=this.listElement.getBoundingClientRect().top,i=t.clientY-e-this.state.offsetY;t.pageY-this.state.offsetY>e&&i<s&&(this.state.draggableElement.style.top=`${i}px`);const n=this.state.draggableElementWrapper.previousElementSibling;n&&this.elementShiftUp(n);const o=this.state.draggableElementWrapper.nextElementSibling;if(o&&this.elementShiftDown(o),!this.focusState.isDragging){const h=document.documentElement.clientHeight,u=60,B=180;clearInterval(this.scrollIntervalState.interval),t.clientY<u?this.scrollIntervalState.interval=setInterval(()=>{this.autoScroll(-180)},10):t.clientY>h-u&&(this.scrollIntervalState.interval=setInterval(()=>{this.autoScroll(B)},10))}}onPointerUp(){clearTimeout(this.holderTimerState.holdTimer),this.holderTimerState.isHolding=!1,clearInterval(this.scrollIntervalState.interval),this.state.draggableElement&&(l.tasks=this.getNewTasksList(),d(this,T).saveTasksToLocalStorage(l.tasks),this.resetState())}resetState(){this.state.draggableElementWrapper.style.height="",this.state.draggableElement.style.zIndex="0",this.state.draggableElement.classList.remove(this.stateClasses.isDragging),this.state.draggableElement.style.position="",this.state={...this.initialState}}autoScroll(t){scrollBy({left:0,top:t,behavior:"smooth"})}setDragState(t,s=!0){if(this.holderTimerState.isHolding||this.focusState.isDragging){const{target:e,clientY:i}=t,{top:n}=e.getBoundingClientRect();if(!e.matches(this.selectors.dndButton))return;this.state.draggableElementWrapper=e.parentElement.parentElement,this.state.draggableElement=e.parentElement,this.state.offsetY=i-n,this.state.draggableElement.style.zIndex=100,this.state.draggableElement.classList.add(this.stateClasses.isDragging),s&&(this.state.draggableElement.style.position="absolute"),this.state.draggableElementWrapper.style.height=`${this.state.draggableElement.getBoundingClientRect().height}px`,this.state.draggableElement.style.top=`${this.getNewTopCoordinate(this.state.draggableElementWrapper)}px`}}getNewTopCoordinate(t){let s=0;const e=[...this.listElements].length;for(let i=0;i<e;i++){const n=this.listElements[i];if(n===t)return s;s+=n.getBoundingClientRect().height+this.listRowGap}return s}}T=new WeakMap;var p,c,v;class _{constructor(t){E(this,p);E(this,c);E(this,v);r(this,"editTaskId");r(this,"ids",{closeModalBtn:"closeModal",modalInput:"modalInput",modalDescriptionInput:"modalDescriptionInput",searchInput:"searchInput",addTaskButton:"addTask",createTask:"createTask",saveEditChanges:"saveChanges"});r(this,"selectors",{taskList:"[data-js-task-list]",task:"[data-js-task]",taskWrapper:".main__item-wrapper",taskTitle:".main__item-title",modalTitle:"[data-js-modal-title]",checkbox:"[data-js-checkbox]"});k(this,c,t),k(this,p,new L),k(this,v,new x(10)),this.TaskListElement=l.listElement,this.modalTitleInput=document.getElementById(this.ids.modalInput),this.modalDescriptionInput=document.getElementById(this.ids.modalDescriptionInput),this.searchInput=document.getElementById(this.ids.searchInput),this.addTaskButton=document.getElementById(this.ids.addTaskButton),this.modalTitle=document.querySelector(this.selectors.modalTitle),this.createTaskButton=document.getElementById(this.ids.createTask),this.saveEditChangesButton=document.getElementById(this.ids.saveEditChanges),this.bindEvents(),l.renderTasks()}debounce(t,s=200){let e;return function(...i){clearTimeout(e),e=setTimeout(()=>{t.apply(this,i)},s)}}bindEvents(){this.TaskListElement.addEventListener("click",t=>{this.onTaskClick(t)}),this.bindAddTaskEnterEvent=this.addTaskEnterEvent.bind(this),this.bindEditTaskEnterEvent=this.editTaskEnterEvent.bind(this),this.modalTitleInput.addEventListener("keydown",this.bindAddTaskEnterEvent),this.createTaskButton.addEventListener("click",()=>{this.addTask()}),this.addTaskButton.addEventListener("click",()=>{this.onAddTaskBtnClick()}),this.saveEditChangesButton.addEventListener("click",t=>{this.onEditTaskBtnClick(t)})}onEditTaskBtnClick(t){t.preventDefault(),this.editTaskEvent(t,this.editTaskId)}onAddTaskBtnClick(){this.attachAddEnterEvent(),this.saveEditChangesButton.classList.add("hidden"),this.createTaskButton.classList.remove("hidden"),d(this,c).openModal(),this.modalTitleInput.focus()}onTaskClick(t){var s;if(t.target.matches(".main__item-delete-button")){const e=t.target.closest(this.selectors.task);if(!confirm(`Удалить задачу ${((s=e.querySelector(this.selectors.taskTitle))==null?void 0:s.textContent)||""} ?`))return;const n=l.tasks.findIndex(o=>String(o.id)===String(t.target.closest(this.selectors.task).dataset.id));n!==-1&&this.deleteTask(e,n);return}if(t.target.matches(this.selectors.checkbox)&&this.changeTaskStatus(t.target),t.target.matches(this.selectors.taskWrapper)||t.target.matches(this.selectors.taskTitle)){const e=t.target.closest(this.selectors.task);this.editTaskMenu(e.querySelector(this.selectors.taskTitle).textContent,this.getDescription(e.dataset.id),e.dataset.id)}}addTaskEnterEvent(t){t.key==="Enter"&&(t.preventDefault(),this.addTask())}editTaskEnterEvent(t){t.key==="Enter"&&(t.preventDefault(),this.editTaskEvent(t,this.editTaskId))}attachAddEnterEvent(){this.modalTitleInput.removeEventListener("keydown",this.bindEditTaskEnterEvent),this.modalTitleInput.addEventListener("keydown",this.bindAddTaskEnterEvent)}attachEditEnterEvent(){this.modalTitleInput.removeEventListener("keydown",this.bindAddTaskEnterEvent),this.modalTitleInput.addEventListener("keydown",this.bindEditTaskEnterEvent)}deleteTask(t,s){l.tasks.splice(s,1),d(this,p).saveTasksToLocalStorage(l.tasks),t.remove(),this.filterTasks(this.searchInput.value),d(this,v).resetDragMode()}changeTaskStatus(t){const e=t.closest(this.selectors.task).dataset.id,i=l.tasks.find(n=>String(n.id)===String(e));i&&(i.isComplete=t.checked,d(this,p).saveTasksToLocalStorage(l.tasks))}editTaskEvent(t,s){if(t.preventDefault(),this.modalTitleInput.value.trim()){const e=this.modalTitleInput.value.trim(),i=this.modalDescriptionInput.value.trim(),n=l.tasks.find(o=>String(s)===String(o.id));if(n){n.title=e,n.description=i,d(this,p).saveTasksToLocalStorage(l.tasks);const o=this.TaskListElement.querySelector(`[data-id="${s}"] ${this.selectors.taskTitle}`);o.textContent=e}this.modalTitleInput.value="",this.modalDescriptionInput.value="",this.filterTasks(this.searchInput.value),d(this,c).closeModal()}else d(this,c).showError("Укажите заголовок задачи!"),this.modalTitleInput.focus()}getDescription(t){const s=l.tasks.find(e=>e.id===t);return(s==null?void 0:s.description)||""}editTaskMenu(t,s,e){this.editTaskId=e,this.attachEditEnterEvent(),this.createTaskButton.classList.add("hidden"),this.saveEditChangesButton.classList.remove("hidden"),this.modalTitle.textContent="Редактировать задачу",this.modalTitleInput.value=t,this.modalDescriptionInput.value=s,d(this,c).openModal()}addTask(){var t,s,e;if(this.modalTitleInput.value.trim()){const i=this.modalTitleInput.value.trim(),n=this.modalDescriptionInput.value.trim(),o=new I(i,n);l.tasks.unshift(o),d(this,p).saveTasksToLocalStorage(l.tasks),(t=this.TaskListElement)==null||t.prepend(l.createTaskElement(o)),(e=(s=this.TaskListElement)==null?void 0:s.querySelector(".main__item--info"))==null||e.remove(),this.modalTitleInput.value="",this.modalDescriptionInput.value="",this.searchInput.value="",d(this,v).resetDragMode(),this.filterTasks(),d(this,c).closeModal()}else d(this,c).showError("Укажите заголовок задачи!"),this.modalTitleInput.focus()}filterTasks(t=""){var e,i;if(l.tasks.length===0){this.TaskListElement.querySelector(".main__item--info")||(this.TaskListElement.innerHTML='<li class="main__item main__item--info">Список дел пока пуст.</li>');return}if(!t){this.TaskListElement.querySelectorAll("li.hidden:not(.main__item--info)").forEach(n=>{n.classList.remove("hidden")}),(e=this.TaskListElement.querySelector("[data-js-not-found]"))==null||e.remove();return}if(this.TaskListElement.querySelectorAll("li:not(.main__item--info)").length>0){const n=t.toLowerCase().trim();this.TaskListElement.querySelectorAll("li:not(.main__item--info)").forEach(o=>{o.textContent.toLowerCase().includes(n)?o.classList.remove("hidden"):o.classList.add("hidden")})}const s=this.TaskListElement.querySelectorAll("li:not(.main__item--info):not(.hidden)");if(s.length===0&&l.tasks.length!==0&&!this.TaskListElement.querySelector(".main__item--info")){const n=document.createElement("li");n.textContent="По вашему запросу ничего не найдено :(",n.classList.add("main__item","main__item--info"),n.setAttribute("data-js-not-found",""),this.TaskListElement.append(n)}s.length>0&&((i=this.TaskListElement.querySelector("[data-js-not-found]"))==null||i.remove())}}p=new WeakMap,c=new WeakMap,v=new WeakMap;class q{constructor(){r(this,"selectors",{modal:"[data-js-modal]",modalError:"[data-js-modal-error]",modalTitle:"[data-js-modal-title]"});r(this,"ids",{closeModalBtn:"closeModal",modalInput:"modalInput",modalDescriptionInput:"modalDescriptionInput"});r(this,"html",document.querySelector("html"));this.modalElement=document.querySelector(this.selectors.modal),this.errorMessageElement=document.querySelector(this.selectors.modalError),this.closeModalButton=document.getElementById(this.ids.closeModalBtn),this.modalTitleInput=document.getElementById(this.ids.modalInput),this.modalDescriptionInput=document.getElementById(this.ids.modalDescriptionInput),this.modalTitle=document.querySelector(this.selectors.modalTitle)}openModal(){this.modalElement.showModal(),this.html.classList.add("lock")}closeModal(){this.modalTitle.textContent="Новая задача",this.errorMessageElement.textContent="",this.modalTitleInput.value="",this.modalDescriptionInput.value="",this.modalElement.close(),this.html.classList.remove("lock")}showError(t){this.errorMessageElement.textContent=t}}var g;class A{constructor(){E(this,g);r(this,"selectors",{switchThemeButton:"[data-js-theme-switcher]"});r(this,"themes",{dark:"dark",light:"light"});r(this,"stateClasses",{isDark:"is-dark-theme"});r(this,"svg",{sun:'<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none"><g clip-path="url(#a)"><path stroke="#BAF6BA" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.5 1.042v2.083m0 18.75v2.083M4.396 4.396l1.48 1.479m13.25 13.25 1.478 1.48M1.042 12.5h2.083m18.75 0h2.083M4.396 20.604l1.48-1.479m13.25-13.25 1.478-1.48M17.708 12.5a5.208 5.208 0 1 1-10.416 0 5.208 5.208 0 0 1 10.416 0"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h25v25H0z"/></clipPath></defs></svg>',moon:'<svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.875 13.3229C21.7112 15.096 21.0457 16.7858 19.9565 18.1946C18.8673 19.6033 17.3995 20.6727 15.7247 21.2776C14.0499 21.8826 12.2375 21.998 10.4995 21.6105C8.7615 21.223 7.1698 20.3485 5.91067 19.0893C4.65154 17.8302 3.77704 16.2385 3.38951 14.5005C3.00197 12.7625 3.11743 10.9501 3.72237 9.27531C4.32731 7.60053 5.39672 6.13267 6.80545 5.04349C8.21418 3.95431 9.90397 3.28886 11.6771 3.125C10.639 4.52945 10.1394 6.25984 10.2693 8.00147C10.3992 9.7431 11.1499 11.3803 12.3848 12.6152C13.6198 13.8501 15.2569 14.6008 16.9985 14.7307C18.7402 14.8606 20.4706 14.361 21.875 13.3229Z" stroke="#1E1E1E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'});k(this,g,"theme"),this.switchThemeButton=document.querySelector(this.selectors.switchThemeButton),this.bindEvents(),this.setInitialTheme()}get isDarkThemeCached(){return localStorage.getItem(d(this,g))?localStorage.getItem(d(this,g))===this.themes.dark:document.documentElement.matches(`.${this.stateClasses.isDark}`)}bindEvents(){this.switchThemeButton.addEventListener("click",()=>{this.switchTheme()})}setIconImage(){this.isDarkThemeCached?this.switchThemeButton.innerHTML=this.svg.sun:this.switchThemeButton.innerHTML=this.svg.moon}setInitialTheme(){const t=this.isDarkThemeCached;if(localStorage.getItem(d(this,g)))document.documentElement.classList.toggle(this.stateClasses.isDark,t);else{const s=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle(this.stateClasses.isDark,s)}this.setIconImage()}switchTheme(){this.isDarkThemeCached?localStorage.setItem(d(this,g),this.themes.light):localStorage.setItem(d(this,g),this.themes.dark),document.documentElement.classList.toggle(this.stateClasses.isDark,this.isDarkThemeCached),this.setIconImage()}}g=new WeakMap;new A;const f=new q,D=new _(f),j=document.getElementById("searchInput");f.modalElement.addEventListener("mousedown",a=>{(a.target===f.modalElement||a.target===f.closeModalButton)&&f.closeModal()});f.closeModalButton.addEventListener("click",()=>{f.closeModal()});j.addEventListener("input",D.debounce(a=>D.filterTasks(a.target.value)));
